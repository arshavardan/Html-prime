# Microservice

## Prerequisites
Make sure you have the following tools installed on your machine before proceeding:

* [Docker](https://docs.docker.com/engine/install/)
* [Node.js (LTS version)](https://nodejs.org/)
* [Yarn](https://yarnpkg.com/en/docs/install)

## Installation
To install the dependencies & dev dependencies, run the following command:
```sh
yarn
```

## Usage
Before running the application, you need to setup the environment variables. To do so, copy the app/env_template file to app/.env and modify the parameters as per your requirement.

### To start the development server, run the following command:
```sh
yarn start
```

### To start the dev dependencies, run the following command:
```sh
docker compose -f docker-compose.dev.yml up
```

### To build the production version of the application, run the following command:
```sh
yarn build
```

### To generate the API documentation, run the following command:
```sh
yarn docs
```

### To start the test runner, run the following command:
```sh
yarn test
```

## Docker
### To run the application inside a Docker container, make sure you have Docker installed on your machine. Then, navigate to the project directory and run the following command:
```sh
docker-compose up -d
```
This will start the production version of the application inside a Docker container. You can access the application by opening your browser and navigating to http://localhost

### To rebuild the generated docker image
```sh
docker-compose up -d --build
```

## Application Structure
The application follows a microservice architecture and is structured as follows:
* `app`
   * `index.ts` This file is the entry point of the microservice
   * `server.ts` This file is the entry point of the server where Express and middlewares are initialized
   * `models/` This directory contains the models used by the application
   * `routes/` This directory contains the Express routes used by the application
   * `specs/` This directory contains the unit test files for the application
   * `types/` This directory contains the type files for the application
      * `custom/*.d.ts` This directory contains all the model type files
   * `utils` This directory contains utility modules used by the application, including:
      * `auth/` Authentication and Authorization modules
      * `connectors/` Database connectors
      * `helpers/` Helper modules
      * `entities.ts` An entity map of models that is passed to typeorm
      * `logger.ts` A logger utility
* `package.json` The project's main configuration file, which lists the dependencies and scripts used by the application.
* `yarn.lock` A file automatically generated by Yarn to manage packages.
